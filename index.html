<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ReachPoint</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./styles.css" />

    <!-- Minimal layout styles for sidebar UI -->
    <style>
      :root{
        --bg:#f6f7fb; --panel:#ffffff; --ink:#0f172a;
        --muted:#64748b; --brand:#1e3a8a; --accent:#22c55e; --ring:#e5e7eb;
      }
      html,body { height:100%; }
      body { margin:0; background:var(--bg); color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }

      .app-shell { display:flex; min-height:100vh; }

      /* Sidebar */
      .sidebar {
        width: 240px; background: var(--brand); color:#fff; display:flex; flex-direction:column;
        position:sticky; top:0; height:100vh; padding:16px 14px; gap:12px;
      }
      .brand { display:flex; align-items:center; gap:10px; font-weight:900; font-size:20px; letter-spacing:.3px; }
      .brand-logo { width:36px; height:36px; border-radius:999px; background:#c7d2fe; }
      .side-nav a{
        display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px;
        color:#e5e7eb; text-decoration:none; font-weight:700;
      }
      .side-nav a:hover, .side-nav a.active { background:rgba(255,255,255,.12); color:#fff; }
      .spacer { flex:1; }
      .logout { color:#e2e8f0; text-decoration:none; font-weight:700; padding:10px 12px; border-radius:10px; }
      .logout:hover { background:rgba(255,255,255,.12); color:#fff; }

      /* Main */
      main#app-root{
        flex:1; padding:20px; max-width:1400px; margin:0 auto; width:100%;
      }
      /* Content bars & cards */
      .content-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }
      .title { font-size:28px; font-weight:900; letter-spacing:.2px; }
      .row { display:flex; gap:10px; align-items:center; }
      .btn { appearance:none; border:1px solid var(--ring); padding:10px 14px; border-radius:10px; background:#fff; font-weight:800; cursor:pointer; }
      .btn-primary { background:var(--accent); border-color:var(--accent); color:#062b12; }
      .btn-ghost { background:#fff; }
      .grid-3 {
        display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:14px; margin-bottom:16px;
      }
      .stat-card {
        background:var(--panel); border:1px solid var(--ring); border-radius:14px; padding:16px;
        display:flex; flex-direction:column; gap:6px; box-shadow:0 2px 6px rgba(0,0,0,.04);
      }
      .stat-label { color:var(--muted); font-size:12px; font-weight:800; letter-spacing:.5px; text-transform:uppercase; }
      .stat-value { font-size:28px; font-weight:900; }
      .list { display:grid; grid-template-columns:1fr; gap:14px; }
      .card { background:var(--panel); border:1px solid var(--ring); border-radius:16px; padding:0; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,.05); }
      .card-head { width:100%; display:flex; gap:12px; align-items:center; padding:14px 16px; background:#fff; border-bottom:1px solid var(--ring); cursor:pointer; }
      .card-head:hover { background:#f9fafb; }
      .card-title { font-weight:900; }
      .card-sub { color:var(--muted); font-size:12px; }
      .card-reminders { color:var(--muted); font-size:12px; }
      .actions { display:flex; gap:8px; padding:12px 16px; }
      .icon.danger{ border:none; background:transparent; cursor:pointer; font-size:16px; }
      .toast{ position:fixed; bottom:16px; right:16px; background:#111827; color:#fff; padding:10px 14px; border-radius:10px; }
      @media (max-width: 900px){
        .sidebar{ position:fixed; transform:translateX(0); z-index:50; height:100dvh; }
        main#app-root{ margin-left:240px; }
        .grid-3 { grid-template-columns:1fr; }
      }
      @media (max-width: 720px){
        .sidebar{ width:210px; }
        main#app-root{ margin-left:210px; padding:14px; }
      }
    </style>

    <!-- Supabase JS v2 -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
      // ===== DEV ONLY: Inject your ReachPoint-dev credentials =====
      window.__SUPABASE_URL__ = "https://qmhxpugetaksrktyfmji.supabase.co";
      window.__SUPABASE_ANON_KEY__ = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFtaHhwdWdldGFrc3JrdHlmbWppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NjA0NzYsImV4cCI6MjA3NDMzNjQ3Nn0.-pS4lHZKwxiVh3XL191_IMcZ-JvESva3zo2elTfSDGg";

      (function initSupabase() {
        try {
          const url = window.__SUPABASE_URL__;
          const key = window.__SUPABASE_ANON_KEY__;
          if (!url || !key) return;

          const client = supabase.createClient(url, key, {
            auth: { persistSession: true, autoRefreshToken: true },
            global: { headers: { "x-reachpoint-env": "dev" } },
          });
          window.supabase = client;
          window.hasSupabase = () => !!(window.supabase && typeof window.supabase.from === "function");
          console.log("[ReachPoint] Supabase client initialized:", window.hasSupabase());
        } catch (e) {
          console.error("[ReachPoint] Failed to init Supabase; local-only fallback.", e);
        }
      })();
    </script>
  </head>

  <body>
    <div class="app-shell">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="brand">
          <div class="brand-logo"></div>
          ReachPoint
        </div>

        <nav class="side-nav">
          <a href="#/dashboard">Overview</a>
          <a href="#/create">New Campaign</a>
          <a href="#/call">Call Anyone</a>
          <a href="#/insights">Insights</a>
        </nav>

        <div class="spacer"></div>
        <a class="logout" href="#/login" data-logout>Log out</a>
      </aside>

      <!-- Main content -->
      <main id="app-root">
        <!-- Your SPA will render into #app via app.js -->
        <div id="app"></div>
      </main>
    </div>

    <!-- Default route BEFORE app loads -->
    <script>
      if (!location.hash || !/^#\//.test(location.hash)) {
        location.hash = "#/dashboard";
      }
    </script>

    <!-- Your app bundle -->
    <script type="module" src="./app.js"></script>
  </body>
</html>
